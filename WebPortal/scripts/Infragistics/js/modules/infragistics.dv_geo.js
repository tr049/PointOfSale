/*!@license
* Infragistics.Web.ClientUI infragistics.dv_geo.js 17.1.20171.1012
*
* Copyright (c) 2011-2017 Infragistics Inc.
*
* http://www.infragistics.com/
*
* Depends:
*     jquery-1.4.4.js
*     jquery.ui.core.js
*     jquery.ui.widget.js
*     infragistics.util.js
*     infragistics.ext_core.js
*     infragistics.ext_collections.js
*     infragistics.ext_io.js
*     infragistics.ext_text.js
*     infragistics.dv_core.js
*     infragistics.ext_ui.js
*/
(function(factory){if(typeof define==="function"&&define.amd){define(["./infragistics.util","./infragistics.ext_core","./infragistics.ext_collections","./infragistics.ext_io","./infragistics.ext_text","./infragistics.dv_core","./infragistics.ext_ui"],factory)}else{factory(igRoot)}})(function($){$.ig=$.ig||{};var $$t={};$.ig.globalDefs=$.ig.globalDefs||{};$.ig.globalDefs.$$z=$$t;$$0=$.ig.globalDefs.$$0;$$4=$.ig.globalDefs.$$4;$$7=$.ig.globalDefs.$$7;$$8=$.ig.globalDefs.$$8;$$1=$.ig.globalDefs.$$1;$$w=$.ig.globalDefs.$$w;$$6=$.ig.globalDefs.$$6;$$a=$.ig.globalDefs.$$a;$.ig.$currDefinitions=$$t;$.ig.util.bulkDefine(["XamMultiScaleImageView:a","IMapRenderDeferralHandler:i","XamMultiScaleImage:j","IEasingFunction:m","XamMultiScaleTileSource:n","DownloadingMultiScaleImageEventHandler:o","TriangulationStatusEventHandler:u"]);var $a=$.ig.intDivide,$b=$.ig.util.cast,$c=$.ig.util.defType,$d=$.ig.util.defEnum,$e=$.ig.util.getBoxIfEnum,$f=$.ig.util.getDefaultValue,$g=$.ig.util.getEnumValue,$h=$.ig.util.getValue,$i=$.ig.util.intSToU,$j=$.ig.util.nullableEquals,$k=$.ig.util.nullableIsNull,$l=$.ig.util.nullableNotEquals,$m=$.ig.util.toNullable,$n=$.ig.util.toString$1,$o=$.ig.util.u32BitwiseAnd,$p=$.ig.util.u32BitwiseOr,$q=$.ig.util.u32BitwiseXor,$r=$.ig.util.u32LS,$s=$.ig.util.unwrapNullable,$t=$.ig.util.wrapNullable,$u=String.fromCharCode,$v=$.ig.util.castObjTo$t,$w=$.ig.util.compare,$x=$.ig.util.replace,$y=$.ig.util.stringFormat,$z=$.ig.util.stringFormat1,$0=$.ig.util.stringFormat2,$1=$.ig.util.stringCompare1,$2=$.ig.util.stringCompare2,$3=$.ig.util.stringCompare3,$4=$.ig.util.compareSimple,$5=$.ig.util.equalsSimple,$6=$.ig.util.numberToString,$7=$.ig.util.tryParseInt32_1,$8=$.ig.util.tryParseInt32_2,$9=$.ig.util.intToString1,$aa=$.ig.util.parseInt32_1,$ab=$.ig.util.parseInt32_2;$c("Triangle:q","Object",{init:function(){$.ig.$op.init.call(this)},v1:0,v2:0,v3:0,$type:new $.ig.Type("Triangle",$.ig.$ot)},true);$c("TriangulationSource:r","Object",{init:function(){$.ig.$op.init.call(this)},create:function(a,b,c){var d=new $$t.r;var e=new Array(a);var f;var g;var h=new Array(a);var i=new Array(a);var j=0;var k=0;for(var l=0;l<a;l++){f=new $$t.aa;g=b(l);j=g.__x;k=g.__y;f.pointX=j;f.pointY=k;f.value=c(l);e[l]=f;h[l]=j;i[l]=k}d.points(e);var m=new $$t.t(a,h,i);m.v();d.triangles(m.l());return d},loadItf:function(a){a.readBytes(5);var b=a.readInt32();var c=a.readInt32();var d=a.readInt32();var e=a.readInt32();a.readBytes(e);var f=new $$t.r;var g=new Array(b);var h;for(var i=0;i<b;i++){h=new $$t.aa;h.pointX=a.readDouble();h.pointY=a.readDouble();h.value=a.readSingle();g[i]=h}f.points(g);var j=new Array(c);var k;for(var l=0;l<c;l++){k=new $$t.q;k.v1=a.readInt32();k.v2=a.readInt32();k.v3=a.readInt32();j[l]=k}f.triangles(j);return f},_points:null,points:function(a){if(arguments.length===1){this._points=a;return a}else{return this._points}},_triangles:null,triangles:function(a){if(arguments.length===1){this._triangles=a;return a}else{return this._triangles}},$type:new $.ig.Type("TriangulationSource",$.ig.$ot)},true);$c("TriangulatorContext:s","Object",{init:function(){$.ig.$op.init.call(this)},j:0,d:null,e:null,i:null,n:null,o:null,p:null,g:null,f:null,h:null,a:null,b:null,m:0,l:0,k:0,c:false,$type:new $.ig.Type("TriangulatorContext",$.ig.$ot)},true);$c("Triangulator:t","DependencyObject",{m:0,j:null,k:null,init:function(a,b,c){this.n=0;$$a.$r.init.call(this);this.m=a;this.j=b;this.k=c},w:function(){{this.t();this._i.c=true;this.s()}},v:function(){{this.t();this._i.c=false;this.s()}},t:function(){var a=this.m;var b=this.j;var c=this.k;var d=new $$4.w($$t.$q.$type,0);if(a>=3){var e=function(){var $ret=new $$4.w($$0.$aw.$type,0);$ret.capacity(a);return $ret}();for(var f=0;f<a;++f){e.add(f)}var g=function(h,i){if(b.item(h)<b.item(i)){return-1}else if(b.item(h)>b.item(i)){return 1}if(c.item(h)<c.item(i)){return-1}else if(c.item(h)>c.item(i)){return 1}return 0};e.sort2(g);var h=b.item(e.__inner[0]);var i=b.item(e.__inner[a-1]);var j=c.item(e.__inner[0]);var k=j;for(var l=1;l<a;l++){j=Math.min(j,c.item(e.__inner[l]));k=Math.max(k,b.item(e.__inner[l]))}var m=i-h;var n=k-j;var o=Math.max(m,n);var p=(i+h)/2;var q=(k+j)/2;var r={__x:p-20*o,__y:q-o,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName};var s={__x:p,__y:q+20*o,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName};var t={__x:p+20*o,__y:q-o,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName};var u=new $$4.u($$t.$q.$type);var v=new $$4.u($$t.$q.$type);var w=new $$t.x;var x=new $$t.z;u.e(function(){var $ret=new $$t.q;$ret.v1=a;$ret.v2=a+1;$ret.v3=a+2;return $ret}());var y=new $$t.s;y.j=a;y.n=r;y.o=s;y.p=t;y.f=v;y.a=w;y.h=e;y.b=x;y.i=d;y.g=u;y.d=b;y.e=c;var z=1;if(a>3e3){z=20}y.m=$.ig.truncate(Math.ceil(a/z));y.l=0;y.k=y.m;this.n=0;this.r();this._i=y}},r:function(){this.q()},q:function(){if(this.triangulationStatusChanged!=null){this.triangulationStatusChanged(this,new $$t.v(this.n))}},l:function(){if(this._i==null){return null}return this._i.i},_i:null,u:function(){{if(this._i==null){return}var a=this._i;var b=this._i.j;var c=this._i.d;var d=this._i.e;var e=this._i.h;var f=this._i.n;var g=this._i.o;var h=this._i.p;var i=this._i.i;var j=this._i.g;var k=this._i.f;var l=this._i.b;var m=this._i.a;var n=this._i.l;var o=this._i.k;var p;var q;var r;var s;var t;var u;var v;var w;var x;var y;var z;var aa;for(var ab=n;ab<o;++ab){m.clear();if(ab<b){p=c.item(e.__inner[ab]);q=d.item(e.__inner[ab])}else if(ab==b){p=f.__x;q=f.__y}else if(ab==b+1){p=g.__x;q=g.__y}else{p=h.__x;q=h.__y}var ac=null;for(var ad=j.c();ad!=null;ad=ac){ac=ad.a;aa=ad._c;r=aa.v1;u=aa.v2;x=aa.v3;if(r<b){s=c.item(e.__inner[r]);t=d.item(e.__inner[r])}else if(r==b){s=f.__x;t=f.__y}else if(r==b+1){s=g.__x;t=g.__y}else{s=h.__x;t=h.__y}if(u<b){v=c.item(e.__inner[u]);w=d.item(e.__inner[u])}else if(u==b){v=f.__x;w=f.__y}else if(u==b+1){v=g.__x;w=g.__y}else{v=h.__x;w=h.__y}if(x<b){y=c.item(e.__inner[x]);z=d.item(e.__inner[x])}else if(x==b){y=f.__x;z=f.__y}else if(x==b+1){y=g.__x;z=g.__y}else{y=h.__x;z=h.__y}l.c(p,q,s,t,v,w,y,z);if(l.a){k.f(aa);j.h(ad)}if(l.b){var ae;ae=new $$t.w(r,u);if(m.contains(ae)){m.remove(ae)}else{m.add(ae)}ae=new $$t.w(u,x);if(m.contains(ae)){m.remove(ae)}else{m.add(ae)}ae=new $$t.w(x,r);if(m.contains(ae)){m.remove(ae)}else{m.add(ae)}j.h(ad)}}var ag=m.getEnumerator();while(ag.moveNext()){var af=ag.current();var ah=new $$t.q;ah.v1=af._a;ah.v2=af._b;ah.v3=ab;j.f(ah)}}if(o==b){for(var ai=k.c();ai!=null;ai=ai.a){aa=ai._c;if(aa.v1<b&&aa.v2<b&&aa.v3<b){i.add(function(){var $ret=new $$t.q;$ret.v1=e.__inner[aa.v1];$ret.v2=e.__inner[aa.v2];$ret.v3=e.__inner[aa.v3];return $ret}())}}for(var aj=j.c();aj!=null;aj=aj.a){aa=aj._c;if(aa.v1<b&&aa.v2<b&&aa.v3<b){i.add(function(){var $ret=new $$t.q;$ret.v1=e.__inner[aa.v1];$ret.v2=e.__inner[aa.v2];$ret.v3=e.__inner[aa.v3];return $ret}())}}this.n=100;this.r()}else{n=o;o+=a.m;if(o>b){o=b}a.l=n;a.k=o;this.n+=$.ig.truncate(Math.floor(100/20));this.r();this.s()}}},p:function(){{this._i=null}},s:function(){{if(this._i.c){window.setTimeout(this.u.runOn(this),0)}else{this.u()}}},n:0,o:function(){return this.n},triangulationStatusChanged:null,$type:new $.ig.Type("Triangulator",$$a.$r.$type)},true);$c("TriangulationStatusEventArgs:v","EventArgs",{_currentStatus:0,currentStatus:function(a){if(arguments.length===1){this._currentStatus=a;return a}else{return this._currentStatus}},init:function(a){$$0.$w.init.call(this);this.currentStatus(a)},$type:new $.ig.Type("TriangulationStatusEventArgs",$$0.$w.$type)},true);$c("HalfEdge:w","Object",{init:function(a,b){$.ig.$op.init.call(this);this._a=a;this._b=b},_a:0,_b:0,$type:new $.ig.Type("HalfEdge",$.ig.$ot)},true);$c("HalfEdgeSet:x","Object",{init:function(){$.ig.$op.init.call(this);this.b=new $$4.g($$t.$w.$type,$.ig.$op.$type,2,new $$t.y)},getEnumerator:function(){return this.b.keys().getEnumerator()},add:function(a){this.b.add(a,null)},remove:function(a){this.b.remove(a)},clear:function(){this.b.clear()},count:function(){return this.b.count()},contains:function(a){return this.b.containsKey(a)},b:null,$type:new $.ig.Type("HalfEdgeSet",$.ig.$ot,[$$0.$bx.$type.specialize($$t.$w.$type)])},true);$c("EdgeComparer:y","Object",{init:function(){$.ig.$op.init.call(this)},equalsC:function(a,b){return a._a==b._a&&a._b==b._b||a._a==b._b&&a._b==b._a},getHashCodeC:function(a){return 65536*Math.max(a._a,a._b)+Math.min(a._a,a._b)},$type:new $.ig.Type("EdgeComparer",$.ig.$ot,[$$0.$bz.$type.specialize($$t.$w.$type)])},true);$c("PointTester:z","Object",{init:function(){$.ig.$op.init.call(this)},c:function(a,b,c,d,e,f,g,h){var i=Math.abs(d-f);var j=Math.abs(f-h);var k=0;var l=0;if(i==0&&j==0){return false}if(i==0&&j!=0){k=(e+c)/2;l=-(g-e)/(h-f)*(k-(e+g)/2)+(f+h)/2}if(i!=0&&j==0){k=(g+e)/2;l=-(e-c)/(f-d)*(k-(c+e)/2)+(d+f)/2}if(i!=0&&j!=0){var m=-(e-c)/(f-d);var n=-(g-e)/(h-f);var o=(c+e)/2;var p=(e+g)/2;var q=(d+f)/2;var r=(f+h)/2;k=(m*o-n*p+r-q)/(m-n);l=i>j?m*(k-o)+q:n*(k-p)+r}var s=e-k;var t=f-l;var u=s*s+t*t;s=a-k;t=b-l;var v=s*s+t*t;this.b=v<=u;this.a=k<a&&(a-k)*(a-k)>u;return true},a:false,b:false,$type:new $.ig.Type("PointTester",$.ig.$ot)},true);$c("TriangulationSourcePointRecord:aa","Object",{init:function(){$.ig.$op.init.call(this)},pointX:0,pointY:0,value:0,$type:new $.ig.Type("TriangulationSourcePointRecord",$.ig.$ot)},true);$c("XamMultiScaleImageView:a","Object",{_b:null,init:function(a){var $self=this;this.g=new $$4.g($$1.$o.$type,$$4.$w.$type.specialize($$0.$c.$type),0);this.j=new $$4.w($$t.$g.$type,0);this.i=new $$4.w($$t.$g.$type,0);this.p=-1;this.o=-1;this.au=$$a.$ae.empty();$.ig.$op.init.call(this);this._b=a;this._b.tileScheduler().j(this);this._h=new $$4.w($$a.$al.$type,0);this._b.am=function(){var $ret=new $.ig.StackPool$1($$a.$al.$type);$ret._j=$self.at.runOn($self);$ret._b=$self.y.runOn($self);$ret._c=$self.aa.runOn($self);$ret._d=$self.z.runOn($self);return $ret}();for(var b=0;b<4;++b){this.i.add(null)}},_h:null,at:function(){return new $$a.al},y:function(a){this._h.add(a)},aa:function(a){this._h.remove(a)},z:function(a){},ao:function(a,b,c){a._l=b;a._m=c},r:function(a){for(var b=0;b<this.i.count();++b){if(a==this.i.__inner[b]){if(a.f!=null&&a.f._aa!=null){var c=a.f._aa;var d=c._c;if(this.g.containsKey(d)){var e=this.g.item(d);for(var f=0;f<e.count();f++){e.__inner[f]()}e.clear();this.g.remove(d)}}this.i.__inner[b]=null;return}}for(var g=0;g<this.j.count();++g){if(this.j.__inner[g]==a){this.j.removeAt(g);break}}},u:function(a){this.j.add(a);this.j.sort2(function(b,c){var d=0;var e=0;if(b.e!=null){d=b.e._aa._b}if(c.e!=null){e=c.e._aa._b}if(d<e){return-1}else if(d>e){return 1}return 0});this.q()},g:null,q:function(){var $self=this;var index_=-1;if(this.j.count()>0){for(var a=0;a<this.i.count();++a){if(this.i.__inner[a]==null){index_=a;break}}}if(index_>=0){this.i.__inner[index_]=this.j.__inner[0];var b=new $$t.h(this._b.source()._k,this._b.source()._i);this.i.__inner[index_].f._aa=b;var ele_=this._l.createElement("img");var c=ele_.getNativeElement();b._c=c;var self_=this;var d=new $$4.w($$0.$c.$type,0);this.g.add(c,d);d.add(ele_.listen("load",function(e){$self.ab(e,index_)}));d.add(ele_.listen("readystatechange",function(e){$self.ab(e,index_)}));d.add(ele_.listen("error",function(e){$self.ac(e,index_)}));var jqele=$(ele_.getNativeElement());jqele.bind("load readystatechange",function(e){if(this.complete||this.readyState=="complete"&&e.type=="readystatechange"){self_.downloadCompleted(e,index_)}});jqele.bind("error",function(e){self_.downloadError(e,index_)});this.j.removeAt(0);var e=this._b.source().p(this.i.__inner[index_].d+8,this.i.__inner[index_].b,this.i.__inner[index_].c);var f=e.value();var g=function(){var $ret=new $$t.p;$ret.uri(f);$ret.image(c);return $ret}();this._b.bi(g);f=g.uri();if(f!=null){c.src=f}}},ab:function(a,b){var e_=a.originalEvent;var img_=e_.target;var c=img_.complete||img_.readyState=="complete"&&e_.type=="readystatechange";if(c){this.downloadCompleted(a,b)}},ac:function(a,b){this.downloadError(a,b)},j:null,i:null,downloadError:function(a,b){var c=this.i.__inner[b];this.i.__inner[b]=null;if(c!=null&&c.f!=null&&c.f._aa!=null){var e_=a.originalEvent;var d=e_.target;if(this.g.containsKey(d)){var e=this.g.item(d);for(var f=0;f<e.count();f++){e.__inner[f]()}e.clear();this.g.remove(d)}}this.q();this.ad()},downloadCompleted:function(a,b){var c=this.i.__inner[b];var d=true;if(c!=null&&c.f!=null&&c.f._aa!=null){d=false;var ele_=c.f._aa._c;if(!ele_.complete){d=true}if(ele_.width==0&&ele_.height==0){d=true}}this.i.__inner[b]=null;if(d){this.q();this.ad();return}var e_=a.originalEvent;var e=e_.target;if(this.g.containsKey(e)){var f=this.g.item(e);for(var g=0;g<f.count();g++){f.__inner[g]()}f.clear();this.g.remove(e)}this._b.bc(c,c.f._aa);if(c.f!=null){this._b.bx(c)}this.q();this.ad()},a:function(a,b,c,d){var e=new $$t.h(a,a);e._c=b._c;if(!b._d.isEmpty()){c+=$.ig.truncate(Math.round(b._d.left()));d+=$.ig.truncate(Math.round(b._d.top()))}e._d=new $$a.ae(0,c,d,a,a);return e},am:function(a){a._q=0},an:function(a){a._q=1},f:function(){return true},s:function(a){if(this._b.deferralHandler()!=null){this._b.deferralHandler().deferredRefresh()}else{window.setTimeout(a,0)}},p:0,o:0,aq:function(){if(this.p==-1){this.p=window.setInterval(this._b.bw.runOn(this._b),50)}},as:function(){if(this.p!=-1){window.clearInterval(this.p);this.p=-1}},ap:function(){if(this.o==-1){this.o=window.setInterval(this._b.bf.runOn(this._b),50)}},ar:function(){if(this.o!=-1){window.clearInterval(this.o);this.o=-1}},t:function(){if(this.p!=-1){this.ar();this._b.bl()}},_k:null,_m:null,_c:null,ae:function(a){this._k=a;this._k.rootWrapper().setStyleProperty("position","relative");this._m=this._k.createElement("canvas");this._m.setStyleProperty("position","absolute");this._m.setStyleProperty("top","0px");this._m.setStyleProperty("left","0px");this._k.append(this._m);this._c=new $.ig.RenderingContext(new $.ig.CanvasViewRenderer,this._k.get2DCanvasContext(this._m));this.af(this._k.rootWrapper().width(),this._k.rootWrapper().height())},af:function(a,b){this._m.setAttribute("width",$.ig.truncate(a*this._b.az()).toString());this._m.setAttribute("height",$.ig.truncate(b*this._b.az()).toString());this._m.setStyleProperty("width",a.toString()+"px");this._m.setStyleProperty("height",b.toString()+"px");this._b._b7=new $$a.ae(0,0,0,a,b);this._b.bs()},aj:function(){this.ad()},index:function(){return 0},postRender:function(){},_isDirty:false,isDirty:function(a){if(arguments.length===1){this._isDirty=a;return a}else{return this._isDirty}},ad:function(){if(this._c==null){return}if(!this.isDirty()){this.isDirty(true);this._b.tileScheduler().l()}},undirty:function(a){this.isDirty(false);this.ak()},au:null,ak:function(){if(this._c==null){return}if(this._c.d()&&this._b.az()!=1){this._c.z();this._c.aa(this._b.az(),this._b.az())}if(!this.au.isEmpty()){this._c.k(this.au.left(),this.au.top(),this.au.width(),this.au.height())}this.au=this._b._b7;for(var a=0;a<this._h.count();a++){var b=this._h.__inner[a];if(b._q==0){this.al(b)}}for(var c=0;c<this._h.count();c++){var d=this._h.__inner[c];if(d._q==1){this.al(d)}}if(this._c.d()&&this._b.az()!=1){this._c.y()}this._b.bh();this._b.bj()},d:function(){var a=true;for(var b=0;b<this.i.count();b++){if(this.i.__inner[b]!=null){a=false}}return a},al:function(a){if(this._c==null){return}var b=a._aa;var c=a.__opacity;if(b==null||b._c==null){return}if(this.e(b._c)){return}if(!b._d.isEmpty()){if(b._d.width()<1||b._d.height()<1){return}this._c.n(b._c,c,b._d.left(),b._d.top(),b._d.width(),b._d.height(),Math.round(a._l+this._b._b7.left()),Math.round(a._m+this._b._b7.top()),a.width(),a.height())}else{this._c.m(b._c,c,Math.round(a._l+this._b._b7.left()),Math.round(a._m+this._b._b7.top()),a.width(),a.height())}},e:function(a){var img_=a;if(!img_.complete){return true}if(img_.width==0&&img_.height==0){return true}return false},x:function(){this.ad()},ag:function(a){this._c=a;this.ad()},_l:null,ah:function(a){this._l=a},ai:function(a){this._b._b7=a;this._b.bs()},preRender:function(){},isValid:function(){return true},$type:new $.ig.Type("XamMultiScaleImageView",$.ig.$ot,[$.ig.ISchedulableRender.prototype.$type])},true);$c("XamMultiScaleTileSource:n","DependencyObject",{init:function(a,b,c,d,e){$$a.$r.init.call(this);this.m=a;this.l=b;this._k=c;this._i=d;this._j=e},m:0,o:function(a){if(arguments.length===1){this.m=a;this.r(0,0,0,0);return a}else{return this.m}},l:0,n:function(a){if(arguments.length===1){this.l=a;this.r(0,0,0,0);return a}else{return this.l}},_k:0,_i:0,_j:0,h:null,p:function(a,b,c){var d=new $$4.w($.ig.$op.$type,0);this.q(a,b,c,d);var e=null;if(d.count()>0){e=$b($$6.$x.$type,d.__inner[0])}return e},q:function(a,b,c,d){},r:function(a,b,c,d){if(this.h!=null){this.h.invalidateTileLayer(a,b,c,d)}},$type:new $.ig.Type("XamMultiScaleTileSource",$$a.$r.$type)},true);$c("MapTileSource:e","XamMultiScaleTileSource",{init:function(a,b,c,d,e){$$t.$n.init.call(this,a,b,c,d,e)},$type:new $.ig.Type("MapTileSource",$$t.$n.$type)},true);$c("ArcGISOnlineTileSource:b","MapTileSource",{init:function(){$$t.$e.init.call(this,2097152,2097152,256,256,0)},mapServerUri:function(a){if(arguments.length===1){this.g($$t.$b.mapServerUriProperty,a);return a}else{return this.c($$t.$b.mapServerUriProperty)}},isMapPublic:function(a){if(arguments.length===1){this.g($$t.$b.isMapPublicProperty,a);return a}else{return this.c($$t.$b.isMapPublicProperty)}},levelOfDetail:function(a){if(arguments.length===1){this.g($$t.$b.levelOfDetailProperty,a);return a}else{return $h(this.c($$t.$b.levelOfDetailProperty))}},userToken:function(a){if(arguments.length===1){this.g($$t.$b.userTokenProperty,a);return a}else{return this.c($$t.$b.userTokenProperty)}},q:function(a,b,c,d){var e=this.mapServerUri()+"/tile/{0}/{1}/{2}";var f="";if(String.isNullOrEmpty(this.mapServerUri())||this.levelOfDetail()<1||!$$6.$x.isWellFormedUriString(this.mapServerUri(),1)){return}if(!this.isMapPublic()){if(!String.isNullOrEmpty(this.userToken())){e+="?token={3}";f=this.userToken().trim([])}else{return}}var g=a-8;if(g>0){var h=$z(e,[g,c,b,f]);d.add(new $$6.x(0,h))}},w:function(a,b){var c=a;if(b.f()==$$t.$b.mapServerUriProperty){c.mapServerUri($b(String,b.c()));c.r(0,0,0,0)}if(b.f()==$$t.$b.userTokenProperty){c.userToken($b(String,b.c()));c.r(0,0,0,0)}if(b.f()==$$t.$b.levelOfDetailProperty){c.o($.ig.truncate(Math.pow(2,c.levelOfDetail()-1)*256));c.n($.ig.truncate(Math.pow(2,c.levelOfDetail()-1)*256))}if(b.f()==$$t.$b.isMapPublicProperty){c.r(0,0,0,0)}},$type:new $.ig.Type("ArcGISOnlineTileSource",$$t.$e.$type)},true);$c("BingMapsTileSource:c","MapTileSource",{init:function(a){if(a>0){switch(a){case 1:this.init1.apply(this,arguments);break}return}$$t.$e.init.call(this,256<<22,256<<22,256,256,0)},init1:function(a,b,c){$$t.$c.init.call(this,0);this.tilePath(b);this.subDomains(c)},tilePath:function(a){if(arguments.length===1){this.g($$t.$c.tilePathProperty,a);return a}else{return this.c($$t.$c.tilePathProperty)}},subDomains:function(a){if(arguments.length===1){this.g($$t.$c.subDomainsProperty,a);return a}else{return this.c($$t.$c.subDomainsProperty)}},z:function(a,b){this.r(0,0,0,0)},u:null,cultureName:function(a){if(arguments.length===1){this.g($$t.$c.cultureNameProperty,a);return a}else{return this.c($$t.$c.cultureNameProperty)}},q:function(a,b,c,d){if(!this.s()){d.clear();return}if(String.isNullOrEmpty(this.tilePath())){return}a-=8;if(a>0){var e=this.w(a,b,c);var f=this.tilePath();f=$x(f,"{culture}",this.u);f=$x(f,"{quadkey}",e);var g=$$0.$aw.parseInt(e.substr(e.length-1,1));f=$x(f,"{subdomain}",this.subDomains().__inner[g]);f=$x(f,"&token={token}","");d.add(new $$6.x(0,f))}},s:function(){var a=true;return a},w:function(a,b,c){var d=new $$6.aj(0);for(var e=a;e>0;--e){var f="0";var g=1<<e-1;if((b&g)!=0){(function(){var $value=f;f=$u($value.charCodeAt(0)+1);return $value})()}if((c&g)!=0){(function(){var $value=f;f=$u($value.charCodeAt(0)+1);return $value})();(function(){var $value=f;f=$u($value.charCodeAt(0)+1);return $value})()}d.h(f)}return d.toString()},y:function(a,b){var c=a;if(b.f()==$$t.$c.subDomainsProperty||b.f()==$$t.$c.tilePathProperty|b.f()==$$t.$c.cultureNameProperty){if(b.f()==$$t.$c.subDomainsProperty){var d=$b($$4.$e.$type.specialize(String),b.d());var e=$b($$4.$e.$type.specialize(String),b.c());if(d!=null){d.collectionChanged=$.ig.Delegate.prototype.remove(d.collectionChanged,c.z.runOn(c))}if(e!=null){e.collectionChanged=$.ig.Delegate.prototype.combine(e.collectionChanged,c.z.runOn(c))}}if(b.f()==$$t.$c.cultureNameProperty){c.u=b.c()}c.r(0,0,0,0)}},$type:new $.ig.Type("BingMapsTileSource",$$t.$e.$type)},true);$c("CloudMadeTileSource:d","MapTileSource",{s:null,init:function(){$$t.$e.init.call(this,134217728,134217728,256,256,0);this.s=new $$6.s(0)},key:function(a){if(arguments.length===1){this.g($$t.$d.keyProperty,a);return a}else{return this.c($$t.$d.keyProperty)}},parameter:function(a){if(arguments.length===1){this.g($$t.$d.parameterProperty,a);return a}else{return this.c($$t.$d.parameterProperty)}},q:function(a,b,c,d){var e=a-8;if(e>0){var f=["a","b","c"];var g=$$t.$d.x;g=$x(g,"{S}",f[this.s.next1(f.length)]);g=$x(g,"{K}",this.key()==null?"":this.key());g=$x(g,"{P}",this.parameter()==null?"":this.parameter());g=$x(g,"{Z}",e.toString());g=$x(g,"{X}",b.toString());g=$x(g,"{Y}",c.toString());d.add(new $$6.x(0,g))}},y:function(a,b){var c=a;if(b.f()==$$t.$d.parameterProperty){c.r(0,0,0,0)}},$type:new $.ig.Type("CloudMadeTileSource",$$t.$e.$type)},true);$c("OpenStreetMapTileSource:f","MapTileSource",{s:null,init:function(){this.s="tile.openstreetmap.org/{Z}/{X}/{Y}.png";$$t.$e.init.call(this,134217728,134217728,256,256,0);this.setTilePathUrl(this.s)},q:function(a,b,c,d){var e=a-8;if(e>0){var f=this.s;f=$x(f,"{Z}",e.toString());f=$x(f,"{X}",b.toString());f=$x(f,"{Y}",c.toString());d.add(new $$6.x(0,f))}},setTilePathUrl:function(a){if(!String.isNullOrEmpty(a)){if(a.startsWith("http://")||a.startsWith("https://")){this.s=a}else{var b="http://";b="https:"==document.location.protocol?"https://":"http://";this.s=b+a}}},$type:new $.ig.Type("OpenStreetMapTileSource",$$t.$e.$type)},true);$c("Tile:g","Object",{init:function(){$.ig.$op.init.call(this)},b:0,c:0,d:0,f:null,e:null,a:new Date,g:function(){var a=Math.pow(2,-this.d);var b=Math.pow(2,-this.d);return new $$a.ae(0,this.b*a,this.c*b,a,b)},$type:new $.ig.Type("Tile",$.ig.$ot)},true);$c("WriteableBitmap:h","Object",{init:function(a,b){$.ig.$op.init.call(this);this._b=a;this._a=b;this._d=$$a.$ae.empty()},_b:0,_a:0,_c:null,_d:null,$type:new $.ig.Type("WriteableBitmap",$.ig.$ot)},true);$c("IMapRenderDeferralHandler:i","Object",{$type:new $.ig.Type("IMapRenderDeferralHandler",null)},true);$c("IEasingFunction:m","Object",{$type:new $.ig.Type("IEasingFunction",null)},true);$c("XamMultiScaleImage:j","Control",{init:function(){this.at=new $$4.w($$t.$g.$type,0);this.ar=false;this.an=new $.ig.LRUCache$2($$t.$g.$type,$$t.$h.$type,1,2147483647,new $$t.k);this.au=new $$4.w($$t.$g.$type,0);this.ap=false;this.aw=1;$$a.$f.init.call(this);this._b7=$$a.$ae.empty();this.tileScheduler(new $.ig.CanvasRenderScheduler);this._ak=new $$t.a(this);this._z=$$t.$j.$type;this._b4=this.viewportOrigin();this._ax=this.viewportWidth()},am:null,_ak:null,ah:null,deferralHandler:function(a){if(arguments.length===1){if(this.ah!=null){this.ah.unRegister(this)}this.ah=a;if(this.ah!=null){this.ah.register(this,this.bt.runOn(this))}return a}else{return this.ah}},source:function(a){if(arguments.length===1){this.g($$t.$j.sourceProperty,a);return a}else{return this.c($$t.$j.sourceProperty)}},viewportOrigin:function(a){if(arguments.length===1){this.g($$t.$j.viewportOriginProperty,a);return a}else{return this.c($$t.$j.viewportOriginProperty)}},_b4:null,viewportWidth:function(a){if(arguments.length===1){this.g($$t.$j.viewportWidthProperty,a);return a}else{return this.c($$t.$j.viewportWidthProperty)}},_ax:0,useSprings:function(a){if(arguments.length===1){this.g($$t.$j.useSpringsProperty,a);return a}else{return this.c($$t.$j.useSpringsProperty)}},springsEasingFunction:function(a){if(arguments.length===1){this.g($$t.$j.springsEasingFunctionProperty,a);return a}else{return this.c($$t.$j.springsEasingFunctionProperty)}},propertyChanged:null,bk:function(a){if(this.propertyChanged!=null){this.propertyChanged(this,a)}switch(a.propertyName()){case"Source":if(this.source()!=null){this.source().h=this}this.br();this.bu();this.bs();break;case"ViewportOrigin":this.bv();break;case"ViewportWidth":this.bv();break;case"UseSprings":if(!this.useSprings()){this._ak.t()}break}},_a5:0,_a6:0,bu:function(){this.by();if(this.source()!=null){this._a5=$$6.$g.u(Math.logBase(this.source()._k,2));this._a6=$$6.$g.u(Math.logBase(this.source().o(),2))}},invalidateTileLayer:function(a,b,c,d){this.br();this.bu();this.bs()},av:new Date,b5:null,ay:0,bv:function(){if(this.useSprings()){this.av=$$0.$s.now();this.b5=this._b4;this.ay=this._ax;this._ak.aq()}else{this._b4=this.viewportOrigin();this._ax=this.viewportWidth();this.bs()}},bw:function(){var a=2;var b=$$0.$s.now().getTime()-this.av.getTime();var c=b/1e3;var d=$.ig.MathUtil.prototype.c(c/a,0,1);var e=this.springsEasingFunction()!=null?this.springsEasingFunction().ease(d):d;var f=1-e;this._ax=this.ay*f+this.viewportWidth()*e;this._b4={__x:this.b5.__x*f+this.viewportOrigin().__x*e,__y:this.b5.__y*f+this.viewportOrigin().__y*e,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName};if(d>=1){this._ak.as()}else{}this.bs()},at:null,a3:function(a,b,c){for(var d=0;d<this.at.count();++d){if(this.at.__inner[d].b==a&&this.at.__inner[d].c==b&&this.at.__inner[d].d==c){return d}}return-1},bt:function(a){var $self=this;this.ar=false;this.ap=false;if(this.source()==null||!this._ak.f()||this._b7.width()==0||this._b7.height()==0){return}var b=$.ig.truncate(Math.ceil(this._b7.width()/this.source()._k));var c=$.ig.truncate(Math.max(1,Math.floor(-Math.logBase(this._ax/b,2))));if(c>=this._a6-8){c=this._a6-8-1}var d=$.ig.truncate(Math.round(Math.pow(2,c)));var e=this._ax;var f=this._b7.height()*e/this._b7.width();var g=this.source().o()/Math.pow(2,c);var h=this.source().n()/Math.pow(2,c);var i=Math.max($.ig.truncate(Math.floor(this._b4.__x*this.source().o()/g)),0);var j=Math.min($.ig.truncate(Math.ceil((this._b4.__x+e)*this.source().o()/g)),d);var k=Math.max($.ig.truncate(Math.floor(this._b4.__y*this.source().n()/h)),0);var l=Math.min($.ig.truncate(Math.ceil((this._b4.__y+f)*this.source().o()/h)),d);var m=(i*g-this._b4.__x*this.source().o())/g;var n=(k*h-this._b4.__y*this.source().n())/h;var o=e*this.source().o()/g*(this.source()._k/this._b7.width());var p=new $$4.w($$t.$g.$type,0);for(var q=i;q<j;++q){for(var r=k;r<l;++r){var s=this.a3(q,r,c);if(s>=0){p.add(this.at.__inner[s]);this.at.removeAt(s)}else{p.add(function(){var $ret=new $$t.g;$ret.b=q;$ret.c=r;$ret.d=c;return $ret}())}}}this.am.f(true);this.by();this.at=p;for(var t=0;t<this.at.count();++t){if(this.at.__inner[t].f==null){this.at.__inner[t].f=this.am.a();this.at.__inner[t].f.__opacity=1;this._ak.am(this.at.__inner[t].f);var u=this.aj(this.at.__inner[t]);if(u!=null){this.at.__inner[t].f._aa=u}else{var v=null;var w=function(){var $ret=new $$t.g;$ret.b=$self.at.__inner[t].b;$ret.c=$self.at.__inner[t].c;$ret.d=$self.at.__inner[t].d;return $ret}();while(w.d>=0&&v==null){w.b=w.b>>1;w.c=w.c>>1;w.d=w.d-1;v=this.aj(w)}if(v!=null){var x=$.ig.truncate(Math.pow(2,this.at.__inner[t].d-w.d));var y=$a(256,x);var z=y*(this.at.__inner[t].b%x);var aa=y*(this.at.__inner[t].c%x);this.at.__inner[t].e=this.am.a();this.at.__inner[t].e.__opacity=1;this._ak.an(this.at.__inner[t].e);u=this._ak.a(y,v,z,aa);this.at.__inner[t].e._aa=u}this._ak.u(this.at.__inner[t])}}var ab=this.source()._k/o;var ac=this.source()._i/o;var ad=(this.at.__inner[t].b-i+m)*ab;var ae=(this.at.__inner[t].c-k+n)*ac;this.at.__inner[t].f.width(ab+.5);this.at.__inner[t].f.height(ac+.5);this._ak.ao(this.at.__inner[t].f,ad,ae);if(this.at.__inner[t].e!=null){this.at.__inner[t].e.width(ab+.5);this.at.__inner[t].e.height(ac+.5);this._ak.ao(this.at.__inner[t].e,ad,ae)}}this.am.f(false);this._ak.aj()},ar:false,bs:function(){if(this.source()==null||!this._ak.f()||this._b7.width()==0||this._b7.height()==0){return}if(this.ar){return}this.ar=true;this._ak.s(this.bt.runOn(this))},by:function(){for(var a=0;a<this.at.count();++a){this._ak.r(this.at.__inner[a]);this.bd(this.at.__inner[a]);if(this.at.__inner[a].f!=null){this.am.n(this.at.__inner[a].f);this.at.__inner[a].f._aa=null;this.at.__inner[a].f=null}}},br:function(){this.ao().i()},aj:function(a){return this.ao().item(a)},bc:function(a,b){this.ao().item(a,b)},an:null,ao:function(a){if(arguments.length===1){this.an=a;return a}else{return this.an}},au:null,aq:function(){return this.au.count()!=0},imageTilesReady:null,ap:false,bh:function(){var a=true;if(this.aq()){a=false}if(!this._ak.d()){a=false}if(a&&!this.ap){if(this.imageTilesReady!=null){this.imageTilesReady(this,new $$0.w)}}this.ap=a},bx:function(a){if(a.e!=null){a.a=$$0.$s.now();this.au.add(a);this._ak.ap()}else{this.bh()}},bd:function(a){if(a.e!=null){this.am.n(a.e);a.e._aa=null;a.e=null;for(var b=0;b<this.au.count();++b){if(this.au.__inner[b]==a){this.au.removeAt(b);break}}if(this.au.count()==0){this._ak.ar()}}},bf:function(){var a=$$0.$s.now();var b=.5;for(var c=0;c<this.au.count();){var d=a.getTime()-this.au.__inner[c].a.getTime();var e=d/1e3;var f=e/b;f=$.ig.MathUtil.prototype.c(f,0,1);this.au.__inner[c].e.__opacity=1-f;if(f>=1){this.am.n(this.au.__inner[c].e);this.au.__inner[c].e._aa=null;this.au.__inner[c].e=null;this.au.removeAt(c)}else{++c}this._ak.x()}if(this.au.count()==0){this._ak.ar()}},_b7:null,bl:function(){this._ax=this.viewportWidth();this._b4=this.viewportOrigin();this.bs()},provideContainer:function(a){this._ak.ae(a)},provideContext:function(a){this._ak.ag(a)},provideRenderer:function(a){this._ak.ah(a)},provideViewport:function(a){this._ak.ai(a)},_tileScheduler:null,tileScheduler:function(a){if(arguments.length===1){this._tileScheduler=a;return a}else{return this._tileScheduler}},bj:function(){if(this.imagesChanged!=null){this.imagesChanged(this,new $$0.w)}},imagesChanged:null,be:function(){this.ar=false},downloadingImage:null,bi:function(a){if(this.downloadingImage!=null){this.downloadingImage(this,a)}},aw:0,az:function(){return this.aw},pixelScalingRatioChanged:function(a){this.aw=a},a4:function(a){if(arguments.length===1){var b=a!=this.a4();if(b){this.ao(new $.ig.LRUCache$2($$t.$g.$type,$$t.$h.$type,1,a,new $$t.k))}return a}else{return this.ao().h()}},$type:new $.ig.Type("XamMultiScaleImage",$$a.$f.$type,[$$0.$b7.$type])},true);$c("TilePositionComparer:k","Object",{init:function(){$.ig.$op.init.call(this)},equalsC:function(a,b){return a.b==b.b&&a.c==b.c&&a.d==b.d},getHashCodeC:function(a){var b=23;b=b*31+a.b;b=b*31+a.c;b=b*31+a.d;return b},$type:new $.ig.Type("TilePositionComparer",$.ig.$ot,[$$0.$bz.$type.specialize($$t.$g.$type)])},true);$c("Pair$2:l","Object",{$t1:null,$t2:null,init:function($t1,$t2,a,b){this.$t1=$t1;this.$t2=$t2;if(!this.hasOwnProperty("$type")){this.$type=this.$type.specialize(this.$t1,this.$t2)}$.ig.$op.init.call(this);this._a=a;this._b=b},_a:null,_b:null,$type:new $.ig.Type("Pair$2",$.ig.$ot)},true);$c("DownloadingMultiScaleImageEventArgs:p","EventArgs",{init:function(){$$0.$w.init.call(this)},_uri:null,uri:function(a){if(arguments.length===1){this._uri=a;return a}else{return this._uri}},_image:null,image:function(a){if(arguments.length===1){this._image=a;return a}else{return this._image}},$type:new $.ig.Type("DownloadingMultiScaleImageEventArgs",$$0.$w.$type)},true);$$t.$r.e="LOCAL_CS[]";$$t.$a.n=-1;$$t.$b.mapServerUriProperty=$$a.$s.i("MapServerUri",String,$$t.$b.$type,new $$a.ac(2,null,$$t.$b.w));$$t.$b.isMapPublicProperty=$$a.$s.i("IsMapPublic",$$0.$aq.$type,$$t.$b.$type,new $$a.ac(2,true,$$t.$b.w));$$t.$b.levelOfDetailProperty=$$a.$s.i("LevelOfDetail",$$0.$aw.$type,$$t.$b.$type,new $$a.ac(2,-1,$$t.$b.w));$$t.$b.userTokenProperty=$$a.$s.i("UserToken",String,$$t.$b.$type,new $$a.ac(2,null,$$t.$b.w));
$$t.$c.tilePathProperty=$$a.$s.i("TilePath",String,$$t.$c.$type,new $$a.ac(2,null,$$t.$c.y));$$t.$c.subDomainsProperty=$$a.$s.i("SubDomains",$$4.$e.$type.specialize(String),$$t.$c.$type,new $$a.ac(2,null,$$t.$c.y));$$t.$c.cultureNameProperty=$$a.$s.i("CultureName",String,$$t.$c.$type,new $$a.ac(2,null,$$t.$c.y));$$t.$d.x="http://{S}.tile.cloudmade.com/{K}/{P}/256/{Z}/{X}/{Y}.png";$$t.$d.u="Key";$$t.$d.w="Parameter";$$t.$d.keyProperty=$$a.$s.i("Key",String,$$t.$d.$type,new $$a.ac(1,null));$$t.$d.parameterProperty=$$a.$s.i("Parameter",String,$$t.$d.$type,new $$a.ac(2,null,$$t.$d.y));$$t.$j.a7="Source";$$t.$j.ba="ViewportOrigin";$$t.$j.bb="ViewportWidth";$$t.$j.a9="UseSprings";$$t.$j.a8="SpringsEasingFunction";$$t.$j.sourceProperty=$$a.$s.i("Source",$$t.$n.$type,$$t.$j.$type,new $$a.ac(2,null,function(a,b){a.bk(new $.ig.PropertyChangedEventArgs$1($$t.$n.$type,"Source",$b($$t.$n.$type,b.d()),$b($$t.$n.$type,b.c())))}));$$t.$j.viewportOriginProperty=$$a.$s.i("ViewportOrigin",$$a.$y.$type,$$t.$j.$type,new $$a.ac(2,{__x:0,__y:0,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName},function(a,b){a.bk(new $.ig.PropertyChangedEventArgs$1($$a.$y.$type,"ViewportOrigin",b.d(),b.c()))}));$$t.$j.viewportWidthProperty=$$a.$s.i("ViewportWidth",Number,$$t.$j.$type,new $$a.ac(2,1,function(a,b){a.bk(new $.ig.PropertyChangedEventArgs$1(Number,"ViewportWidth",b.d(),b.c()))}));$$t.$j.useSpringsProperty=$$a.$s.i("UseSprings",$$0.$aq.$type,$$t.$j.$type,new $$a.ac(2,false,function(a,b){a.bk(new $.ig.PropertyChangedEventArgs$1($$0.$aq.$type,"UseSprings",b.d(),b.c()))}));$$t.$j.springsEasingFunctionProperty=$$a.$s.i("SpringsEasingFunction",$$t.$m.$type,$$t.$j.$type,new $$a.ac(2,null,function(a,b){a.bk(new $.ig.PropertyChangedEventArgs$1($$t.$m.$type,"SpringsEasingFunction",b.d(),b.c()))}))});(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}})(function($){$(document).ready(function(){var wm=$("#__ig_wm__").length>0?$("#__ig_wm__"):$("<div id='__ig_wm__'></div>").appendTo(document.body);wm.css({position:"fixed",bottom:0,right:0,zIndex:1e3}).addClass("ui-igtrialwatermark")})});